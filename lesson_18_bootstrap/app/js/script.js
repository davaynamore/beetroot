'use strict';

console.dir($('#welcome'));
var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
window.requestAnimationFrame = requestAnimationFrame;
$('.partners__list').slick({
  autoplay: true,
  slidesToShow: 6,
  arrows: false
});
var form = $('#contactForm');
form.on('submit', function (e) {
  e.preventDefault();
  getUserData();
  showModal();
});
$('.modal__close').on('click', function () {
  closeModal();
});

var showModal = function showModal() {
  $('.modal')[0].classList.add('open');
  disableScroll();
};

var closeModal = function closeModal() {
  $('.modal')[0].classList.remove('open');
  enableScroll();
};

var getUserData = function getUserData() {
  var userData = {};
  Array.prototype.forEach.call(form[0].elements, function (el) {
    if (!el.value) return;
    userData[el.name] = el.value;
    el.value = '';
  });
  return userData;
};

var servicesTexts = $('.grid-item__text');
var arr = Array.prototype.map.call(servicesTexts, function (el) {
  var a = el.innerText.split('');
  if (a.length < 85) return el.innerText;
  var newA = a.slice(0, 85);
  var index = newA.lastIndexOf(' ');
  return newA.slice(0, index).join('') + '...';
});
Array.prototype.forEach.call(servicesTexts, function (el, idx) {
  el.innerText = arr[idx];
});
document.addEventListener('scroll', function () {
  setMenuFixed();
});

var setMenuFixed = function setMenuFixed() {
  var navbar = document.getElementsByClassName('navigation')[0];

  if (window.pageYOffset >= 34) {
    navbar.classList.add('fixed-top');
  } else {
    navbar.classList.remove('fixed-top');
  }
};

var progress = 0;

function step() {
  var progressbar = $('#progressbar')[0];
  var progress = Math.floor(window.scrollY * 100 / (document.body.scrollHeight - window.innerHeight));

  if (progress <= 100) {
    progressbar.style.transform = "translateX(-".concat(100 - progress, "%)");
  }
}

;

document.onscroll = function () {
  requestAnimationFrame(step);
};

var mobileMenuButton = $('.navbar-toggler');
var mobileMenu = $('#navbar');
mobileMenuButton.on('click', function () {
  mobileMenu.toggleClass('open');
});
$('.navigation__link').on('click', function (e) {
  e.preventDefault();
  var top = $($(this).attr('href'))[0].offsetTop;
  window.scrollTo({
    top: top,
    behavior: 'smooth'
  });
});
$('.up').on('click', function () {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
}); // left: 37, up: 38, right: 39, down: 40,
// spacebar: 32, pageup: 33, pagedown: 34, end: 35, home: 36

var keys = {
  37: 1,
  38: 1,
  39: 1,
  40: 1
};

function preventDefault(e) {
  e = e || window.event;
  if (e.preventDefault) e.preventDefault();
  e.returnValue = false;
}

function preventDefaultForScrollKeys(e) {
  if (keys[e.keyCode]) {
    preventDefault(e);
    return false;
  }
}

function disableScroll() {
  if (window.addEventListener) // older FF
    window.addEventListener('DOMMouseScroll', preventDefault, false);
  window.onwheel = preventDefault; // modern standard

  window.onmousewheel = document.onmousewheel = preventDefault; // older browsers, IE

  window.ontouchmove = preventDefault; // mobile

  document.onkeydown = preventDefaultForScrollKeys;
}

function enableScroll() {
  if (window.removeEventListener) window.removeEventListener('DOMMouseScroll', preventDefault, false);
  window.onmousewheel = document.onmousewheel = null;
  window.onwheel = null;
  window.ontouchmove = null;
  document.onkeydown = null;
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJjb25zb2xlIiwiZGlyIiwiJCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndpbmRvdyIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic2xpY2siLCJhdXRvcGxheSIsInNsaWRlc1RvU2hvdyIsImFycm93cyIsImZvcm0iLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImdldFVzZXJEYXRhIiwic2hvd01vZGFsIiwiY2xvc2VNb2RhbCIsImNsYXNzTGlzdCIsImFkZCIsImRpc2FibGVTY3JvbGwiLCJyZW1vdmUiLCJlbmFibGVTY3JvbGwiLCJ1c2VyRGF0YSIsIkFycmF5IiwicHJvdG90eXBlIiwiZm9yRWFjaCIsImNhbGwiLCJlbGVtZW50cyIsImVsIiwidmFsdWUiLCJuYW1lIiwic2VydmljZXNUZXh0cyIsImFyciIsIm1hcCIsImEiLCJpbm5lclRleHQiLCJzcGxpdCIsImxlbmd0aCIsIm5ld0EiLCJzbGljZSIsImluZGV4IiwibGFzdEluZGV4T2YiLCJqb2luIiwiaWR4IiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0TWVudUZpeGVkIiwibmF2YmFyIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInBhZ2VZT2Zmc2V0IiwicHJvZ3Jlc3MiLCJzdGVwIiwicHJvZ3Jlc3NiYXIiLCJNYXRoIiwiZmxvb3IiLCJzY3JvbGxZIiwiYm9keSIsInNjcm9sbEhlaWdodCIsImlubmVySGVpZ2h0Iiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJvbnNjcm9sbCIsIm1vYmlsZU1lbnVCdXR0b24iLCJtb2JpbGVNZW51IiwidG9nZ2xlQ2xhc3MiLCJ0b3AiLCJhdHRyIiwib2Zmc2V0VG9wIiwic2Nyb2xsVG8iLCJiZWhhdmlvciIsImtleXMiLCJldmVudCIsInJldHVyblZhbHVlIiwicHJldmVudERlZmF1bHRGb3JTY3JvbGxLZXlzIiwia2V5Q29kZSIsIm9ud2hlZWwiLCJvbm1vdXNld2hlZWwiLCJvbnRvdWNobW92ZSIsIm9ua2V5ZG93biIsInJlbW92ZUV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiJBQUFFOztBQUVBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsQ0FBQyxDQUFDLFVBQUQsQ0FBYjtBQUVBLElBQU1DLHFCQUFxQixHQUFHQyxNQUFNLENBQUNELHFCQUFQLElBQzlCQyxNQUFNLENBQUNDLHdCQUR1QixJQUU5QkQsTUFBTSxDQUFDRSwyQkFGdUIsSUFHOUJGLE1BQU0sQ0FBQ0csdUJBSFA7QUFJQUgsTUFBTSxDQUFDRCxxQkFBUCxHQUErQkEscUJBQS9CO0FBRUFELENBQUMsQ0FBQyxpQkFBRCxDQUFELENBQXFCTSxLQUFyQixDQUEyQjtBQUMxQkMsRUFBQUEsUUFBUSxFQUFFLElBRGdCO0FBRTFCQyxFQUFBQSxZQUFZLEVBQUUsQ0FGWTtBQUcxQkMsRUFBQUEsTUFBTSxFQUFFO0FBSGtCLENBQTNCO0FBTUEsSUFBTUMsSUFBSSxHQUFHVixDQUFDLENBQUMsY0FBRCxDQUFkO0FBRUFVLElBQUksQ0FBQ0MsRUFBTCxDQUFRLFFBQVIsRUFBa0IsVUFBQ0MsQ0FBRCxFQUFPO0FBQ3hCQSxFQUFBQSxDQUFDLENBQUNDLGNBQUY7QUFDQUMsRUFBQUEsV0FBVztBQUNYQyxFQUFBQSxTQUFTO0FBQ1QsQ0FKRDtBQU1BZixDQUFDLENBQUMsZUFBRCxDQUFELENBQW1CVyxFQUFuQixDQUFzQixPQUF0QixFQUErQixZQUFNO0FBQ3BDSyxFQUFBQSxVQUFVO0FBQ1YsQ0FGRDs7QUFJQSxJQUFNRCxTQUFTLEdBQUcsU0FBWkEsU0FBWSxHQUFNO0FBQ3ZCZixFQUFBQSxDQUFDLENBQUMsUUFBRCxDQUFELENBQVksQ0FBWixFQUFlaUIsU0FBZixDQUF5QkMsR0FBekIsQ0FBNkIsTUFBN0I7QUFDQUMsRUFBQUEsYUFBYTtBQUNiLENBSEQ7O0FBS0EsSUFBTUgsVUFBVSxHQUFHLFNBQWJBLFVBQWEsR0FBTTtBQUN4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QVEsQ0FBQ2dDLFlBQVQsR0FBd0IsSUFBOUM7QUFDQTFFLEVBQUFBLE1BQU0sQ0FBQ3lFLE9BQVAsR0FBaUIsSUFBakI7QUFDQXpFLEVBQUFBLE1BQU0sQ0FBQzJFLFdBQVAsR0FBcUIsSUFBckI7QUFDQWpDLEVBQUFBLFFBQVEsQ0FBQ2tDLFNBQVQsR0FBcUIsSUFBckI7QUFDQSIsInNvdXJjZXNDb250ZW50IjpbIlx0XHQndXNlIHN0cmljdCc7XHJcblxyXG5cdFx0Y29uc29sZS5kaXIoJCgnI3dlbGNvbWUnKSk7XHJcblxyXG5cdFx0Y29uc3QgcmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxyXG5cdFx0d2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxyXG5cdFx0d2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxyXG5cdFx0d2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xyXG5cdFx0d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHJlcXVlc3RBbmltYXRpb25GcmFtZTtcclxuXHJcblx0XHQkKCcucGFydG5lcnNfX2xpc3QnKS5zbGljayh7XHJcblx0XHRcdGF1dG9wbGF5OiB0cnVlLFxyXG5cdFx0XHRzbGlkZXNUb1Nob3c6IDYsXHJcblx0XHRcdGFycm93czogZmFsc2VcclxuXHRcdH0pO1xyXG5cclxuXHRcdGNvbnN0IGZvcm0gPSAkKCcjY29udGFjdEZvcm0nKTtcclxuXHJcblx0XHRmb3JtLm9uKCdzdWJtaXQnLCAoZSkgPT4ge1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGdldFVzZXJEYXRhKCk7XHJcblx0XHRcdHNob3dNb2RhbCgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JCgnLm1vZGFsX19jbG9zZScpLm9uKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0Y2xvc2VNb2RhbCgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29uc3Qgc2hvd01vZGFsID0gKCkgPT4ge1xyXG5cdFx0XHQkKCcubW9kYWwnKVswXS5jbGFzc0xpc3QuYWRkKCdvcGVuJyk7XHJcblx0XHRcdGRpc2FibGVTY3JvbGwoKTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBjbG9zZU1vZGFsID0gKCkgPT4ge1xyXG5cdFx0XHQkKCcubW9kYWwnKVswXS5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XHJcblx0XHRcdGVuYWJsZVNjcm9sbCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGdldFVzZXJEYXRhID0gKCkgPT4ge1xyXG5cdFx0XHRjb25zdCB1c2VyRGF0YSA9IHt9O1xyXG5cdFx0XHRBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGZvcm1bMF0uZWxlbWVudHMsIChlbCkgPT4ge1xyXG5cdFx0XHRcdGlmKCFlbC52YWx1ZSkgcmV0dXJuO1xyXG5cdFx0XHRcdHVzZXJEYXRhW2VsLm5hbWVdID0gZWwudmFsdWU7XHJcblx0XHRcdFx0ZWwudmFsdWUgPSAnJztcclxuXHRcdFx0fSlcclxuXHRcdFx0cmV0dXJuIHVzZXJEYXRhO1xyXG5cdFx0fTtcclxuXHJcblx0XHRjb25zdCBzZXJ2aWNlc1RleHRzID0gJCgnLmdyaWQtaXRlbV9fdGV4dCcpO1xyXG5cclxuXHRcdGNvbnN0IGFyciA9IEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChzZXJ2aWNlc1RleHRzICxlbCA9PiB7XHJcblx0XHRcdGxldCBhID0gZWwuaW5uZXJUZXh0LnNwbGl0KCcnKTtcclxuXHRcdFx0aWYoYS5sZW5ndGggPCA4NSkgcmV0dXJuIGVsLmlubmVyVGV4dDtcclxuXHRcdFx0bGV0IG5ld0EgPSBhLnNsaWNlKDAsIDg1KTtcclxuXHRcdFx0bGV0IGluZGV4ID0gbmV3QS5sYXN0SW5kZXhPZignICcpO1xyXG5cdFx0XHRyZXR1cm4gbmV3QS5zbGljZSgwLCBpbmRleCkuam9pbignJykgKyAnLi4uJztcclxuXHRcdH0pO1xyXG5cclxuXHRcdEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoc2VydmljZXNUZXh0cywgKGVsLCBpZHgpID0+IHtcclxuXHRcdFx0ZWwuaW5uZXJUZXh0ID0gYXJyW2lkeF07XHJcblx0XHR9KTtcclxuXHJcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XHJcblx0XHRcdHNldE1lbnVGaXhlZCgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29uc3Qgc2V0TWVudUZpeGVkID0gKCkgPT4ge1xyXG5cdFx0XHRjb25zdCBuYXZiYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCduYXZpZ2F0aW9uJylbMF07XHJcblx0XHRcdGlmKHdpbmRvdy5wYWdlWU9mZnNldCA+PSAzNCl7XHJcblx0XHRcdFx0bmF2YmFyLmNsYXNzTGlzdC5hZGQoJ2ZpeGVkLXRvcCcpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdG5hdmJhci5jbGFzc0xpc3QucmVtb3ZlKCdmaXhlZC10b3AnKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHRsZXQgcHJvZ3Jlc3MgPSAwO1xyXG5cclxuXHRcdGZ1bmN0aW9uIHN0ZXAoKSB7XHJcblx0XHRcdGNvbnN0IHByb2dyZXNzYmFyID0gJCgnI3Byb2dyZXNzYmFyJylbMF07XHJcblx0XHRcdGxldCBwcm9ncmVzcyA9IE1hdGguZmxvb3Iod2luZG93LnNjcm9sbFkgKiAxMDAgLyAoZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQgLSB3aW5kb3cuaW5uZXJIZWlnaHQpKTtcclxuXHRcdFx0aWYocHJvZ3Jlc3MgPD0gMTAwKSB7XHJcblx0XHRcdFx0cHJvZ3Jlc3NiYXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoLSR7MTAwIC0gcHJvZ3Jlc3N9JSlgO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdGRvY3VtZW50Lm9uc2Nyb2xsID0gKCkgPT4ge1xyXG5cdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XHJcblx0XHR9O1xyXG5cclxuXHRcdGNvbnN0IG1vYmlsZU1lbnVCdXR0b24gPSAkKCcubmF2YmFyLXRvZ2dsZXInKTtcclxuXHRcdGNvbnN0IG1vYmlsZU1lbnUgPSAkKCcjbmF2YmFyJyk7XHJcblxyXG5cdFx0bW9iaWxlTWVudUJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0bW9iaWxlTWVudS50b2dnbGVDbGFzcygnb3BlbicpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JCgnLm5hdmlnYXRpb25fX2xpbmsnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRjb25zdCB0b3AgPSAkKCQodGhpcykuYXR0cignaHJlZicpKVswXS5vZmZzZXRUb3A7XHJcblx0XHRcdHdpbmRvdy5zY3JvbGxUbyh7XHJcblx0XHRcdFx0dG9wOiB0b3AsXHJcblx0XHRcdFx0YmVoYXZpb3I6ICdzbW9vdGgnXHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JCgnLnVwJykub24oJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHR3aW5kb3cuc2Nyb2xsVG8oe1xyXG5cdFx0XHRcdHRvcDogMCxcclxuXHRcdFx0XHRiZWhhdmlvcjogJ3Ntb290aCdcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblxyXG5cclxuLy8gbGVmdDogMzcsIHVwOiAzOCwgcmlnaHQ6IDM5LCBkb3duOiA0MCxcclxuLy8gc3BhY2ViYXI6IDMyLCBwYWdldXA6IDMzLCBwYWdlZG93bjogMzQsIGVuZDogMzUsIGhvbWU6IDM2XHJcbnZhciBrZXlzID0gezM3OiAxLCAzODogMSwgMzk6IDEsIDQwOiAxfTtcclxuXHJcbmZ1bmN0aW9uIHByZXZlbnREZWZhdWx0KGUpIHtcclxuXHRlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XHJcblx0aWYgKGUucHJldmVudERlZmF1bHQpXHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0ZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwcmV2ZW50RGVmYXVsdEZvclNjcm9sbEtleXMoZSkge1xyXG5cdGlmIChrZXlzW2Uua2V5Q29kZV0pIHtcclxuXHRcdHByZXZlbnREZWZhdWx0KGUpO1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gZGlzYWJsZVNjcm9sbCgpIHtcclxuICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIC8vIG9sZGVyIEZGXHJcbiAgXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NTW91c2VTY3JvbGwnLCBwcmV2ZW50RGVmYXVsdCwgZmFsc2UpO1xyXG4gIHdpbmRvdy5vbndoZWVsID0gcHJldmVudERlZmF1bHQ7IC8vIG1vZGVybiBzdGFuZGFyZFxyXG4gIHdpbmRvdy5vbm1vdXNld2hlZWwgPSBkb2N1bWVudC5vbm1vdXNld2hlZWwgPSBwcmV2ZW50RGVmYXVsdDsgLy8gb2xkZXIgYnJvd3NlcnMsIElFXHJcbiAgd2luZG93Lm9udG91Y2htb3ZlICA9IHByZXZlbnREZWZhdWx0OyAvLyBtb2JpbGVcclxuICBkb2N1bWVudC5vbmtleWRvd24gID0gcHJldmVudERlZmF1bHRGb3JTY3JvbGxLZXlzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbmFibGVTY3JvbGwoKSB7XHJcblx0aWYgKHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKVxyXG5cdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ0RPTU1vdXNlU2Nyb2xsJywgcHJldmVudERlZmF1bHQsIGZhbHNlKTtcclxuXHR3aW5kb3cub25tb3VzZXdoZWVsID0gZG9jdW1lbnQub25tb3VzZXdoZWVsID0gbnVsbDtcclxuXHR3aW5kb3cub253aGVlbCA9IG51bGw7XHJcblx0d2luZG93Lm9udG91Y2htb3ZlID0gbnVsbDtcclxuXHRkb2N1bWVudC5vbmtleWRvd24gPSBudWxsO1xyXG59Il0sImZpbGUiOiJzY3JpcHQuanMifQ==
