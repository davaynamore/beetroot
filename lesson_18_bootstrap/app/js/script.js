'use strict';

var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
window.requestAnimationFrame = requestAnimationFrame;
$('.partners__list').slick({
  autoplay: true,
  slidesToShow: 6,
  arrows: false
});
var form = $('#contactForm');
form.on('submit', function (e) {
  e.preventDefault();
  getUserData();
  showModal();
});
$('.modal__close').on('click', function () {
  closeModal();
});

var showModal = function showModal() {
  $('.modal')[0].classList.add('open');
  disableScroll();
};

var closeModal = function closeModal() {
  $('.modal')[0].classList.remove('open');
  enableScroll();
};

var getUserData = function getUserData() {
  var userData = {};
  Array.prototype.forEach.call(form[0].elements, function (el) {
    if (!el.value) return;
    userData[el.name] = el.value;
    el.value = '';
  });
  return userData;
};

var servicesTexts = $('.grid-item__text');
var arr = Array.prototype.map.call(servicesTexts, function (el) {
  var a = el.innerText.split('');
  if (a.length < 85) return el.innerText;
  var newA = a.slice(0, 85);
  var index = newA.lastIndexOf(' ');
  return newA.slice(0, index).join('') + '...';
});
Array.prototype.forEach.call(servicesTexts, function (el, idx) {
  el.innerText = arr[idx];
});
document.addEventListener('scroll', function () {
  setMenuFixed();
});

var setMenuFixed = function setMenuFixed() {
  var navbar = document.getElementsByClassName('navigation')[0];

  if (window.pageYOffset >= 34) {
    navbar.classList.add('fixed-top');
  } else {
    navbar.classList.remove('fixed-top');
  }
};

var progress = 0;

function step() {
  var progressbar = $('#progressbar')[0];
  var progress = Math.floor(window.scrollY * 100 / (document.body.scrollHeight - window.innerHeight));

  if (progress <= 100) {
    progressbar.style.transform = "translateX(-".concat(100 - progress, "%)");
  }
}

;

document.onscroll = function () {
  requestAnimationFrame(step);
};

var mobileMenuButton = $('.navbar-toggler');
var mobileMenu = $('#navbar');
mobileMenuButton.on('click', function () {
  mobileMenu.toggleClass('open');
});
$('.navigation__link').on('click', function (e) {
  e.preventDefault();
  var top = $($(this).attr('href'))[0].offsetTop;
  window.scrollTo({
    top: top,
    behavior: 'smooth'
  });
});
$('.up').on('click', function () {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
}); // left: 37, up: 38, right: 39, down: 40,
// spacebar: 32, pageup: 33, pagedown: 34, end: 35, home: 36

var keys = {
  37: 1,
  38: 1,
  39: 1,
  40: 1
};

function preventDefault(e) {
  e = e || window.event;
  if (e.preventDefault) e.preventDefault();
  e.returnValue = false;
}

function preventDefaultForScrollKeys(e) {
  if (keys[e.keyCode]) {
    preventDefault(e);
    return false;
  }
}

function disableScroll() {
  if (window.addEventListener) // older FF
    window.addEventListener('DOMMouseScroll', preventDefault, false);
  window.onwheel = preventDefault; // modern standard

  window.onmousewheel = document.onmousewheel = preventDefault; // older browsers, IE

  window.ontouchmove = preventDefault; // mobile

  document.onkeydown = preventDefaultForScrollKeys;
}

function enableScroll() {
  if (window.removeEventListener) window.removeEventListener('DOMMouseScroll', preventDefault, false);
  window.onmousewheel = document.onmousewheel = null;
  window.onwheel = null;
  window.ontouchmove = null;
  document.onkeydown = null;
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3aW5kb3ciLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtc1JlcXVlc3RBbmltYXRpb25GcmFtZSIsIiQiLCJzbGljayIsImF1dG9wbGF5Iiwic2xpZGVzVG9TaG93IiwiYXJyb3dzIiwiZm9ybSIsIm9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZ2V0VXNlckRhdGEiLCJzaG93TW9kYWwiLCJjbG9zZU1vZGFsIiwiY2xhc3NMaXN0IiwiYWRkIiwiZGlzYWJsZVNjcm9sbCIsInJlbW92ZSIsImVuYWJsZVNjcm9sbCIsInVzZXJEYXRhIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJmb3JFYWNoIiwiY2FsbCIsImVsZW1lbnRzIiwiZWwiLCJ2YWx1ZSIsIm5hbWUiLCJzZXJ2aWNlc1RleHRzIiwiYXJyIiwibWFwIiwiYSIsImlubmVyVGV4dCIsInNwbGl0IiwibGVuZ3RoIiwibmV3QSIsInNsaWNlIiwiaW5kZXgiLCJsYXN0SW5kZXhPZiIsImpvaW4iLCJpZHgiLCJkb2N1bWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJzZXRNZW51Rml4ZWQiLCJuYXZiYXIiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwicGFnZVlPZmZzZXQiLCJwcm9ncmVzcyIsInN0ZXAiLCJwcm9ncmVzc2JhciIsIk1hdGgiLCJmbG9vciIsInNjcm9sbFkiLCJib2R5Iiwic2Nyb2xsSGVpZ2h0IiwiaW5uZXJIZWlnaHQiLCJzdHlsZSIsInRyYW5zZm9ybSIsIm9uc2Nyb2xsIiwibW9iaWxlTWVudUJ1dHRvbiIsIm1vYmlsZU1lbnUiLCJ0b2dnbGVDbGFzcyIsInRvcCIsImF0dHIiLCJvZmZzZXRUb3AiLCJzY3JvbGxUbyIsImJlaGF2aW9yIiwia2V5cyIsImV2ZW50IiwicmV0dXJuVmFsdWUiLCJwcmV2ZW50RGVmYXVsdEZvclNjcm9sbEtleXMiLCJrZXlDb2RlIiwib253aGVlbCIsIm9ubW91c2V3aGVlbCIsIm9udG91Y2htb3ZlIiwib25rZXlkb3duIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciJdLCJtYXBwaW5ncyI6IkFBQUU7O0FBRUEsSUFBTUEscUJBQXFCLEdBQUdDLE1BQU0sQ0FBQ0QscUJBQVAsSUFDOUJDLE1BQU0sQ0FBQ0Msd0JBRHVCLElBRTlCRCxNQUFNLENBQUNFLDJCQUZ1QixJQUc5QkYsTUFBTSxDQUFDRyx1QkFIUDtBQUlBSCxNQUFNLENBQUNELHFCQUFQLEdBQStCQSxxQkFBL0I7QUFFQUssQ0FBQyxDQUFDLGlCQUFELENBQUQsQ0FBcUJDLEtBQXJCLENBQTJCO0FBQzFCQyxFQUFBQSxRQUFRLEVBQUUsSUFEZ0I7QUFFMUJDLEVBQUFBLFlBQVksRUFBRSxDQUZZO0FBRzFCQyxFQUFBQSxNQUFNLEVBQUU7QUFIa0IsQ0FBM0I7QUFNQSxJQUFNQyxJQUFJLEdBQUdMLENBQUMsQ0FBQyxjQUFELENBQWQ7QUFFQUssSUFBSSxDQUFDQyxFQUFMLENBQVEsUUFBUixFQUFrQixVQUFDQyxDQUFELEVBQU87QUFDeEJBLEVBQUFBLENBQUMsQ0FBQ0MsY0FBRjtBQUNBQyxFQUFBQSxXQUFXO0FBQ1hDLEVBQUFBLFNBQVM7QUFDVCxDQUpEO0FBTUFWLENBQUMsQ0FBQyxlQUFELENBQUQsQ0FBbUJNLEVBQW5CLENBQXNCLE9BQXRCLEVBQStCLFlBQU07QUFDcENLLEVBQUFBLFVBQVU7QUFDVixDQUZEOztBQUlBLElBQU1ELFNBQVMsR0FBRyxTQUFaQSxTQUFZLEdBQU07QUFDdkJWLEVBQUFBLENBQUMsQ0FBQyxRQUFELENBQUQsQ0FBWSxDQUFaLEVBQWVZLFNBQWYsQ0FBeUJDLEdBQXpCLENBQTZCLE1BQTdCO0FBQ0FDLEVBQUFBLGFBQWE7QUFDYixDQUhEOztBQUtBLElBQU1ILFVBQVUsR0FBRyxTQUFiQSxVQUFhLEdBQU07QUFDeEJYLEVBQUFBLENBQUMsQ0FBQyxRQUFELENBQUQsQ0FBWSxDQUFaLEVBQWVZLFNBQWYsQ0FBeUJHLE1BQXpCLENB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QjtBQUNBMUUsRUFBQUEsTUFBTSxDQUFDNEUsV0FBUCxHQUFxQixJQUFyQjtBQUNBakMsRUFBQUEsUUFBUSxDQUFDa0MsU0FBVCxHQUFxQixJQUFyQjtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsiXHRcdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0XHRjb25zdCByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcblx0XHR3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcblx0XHR3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcblx0XHR3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XHJcblx0XHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xyXG5cclxuXHRcdCQoJy5wYXJ0bmVyc19fbGlzdCcpLnNsaWNrKHtcclxuXHRcdFx0YXV0b3BsYXk6IHRydWUsXHJcblx0XHRcdHNsaWRlc1RvU2hvdzogNixcclxuXHRcdFx0YXJyb3dzOiBmYWxzZVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29uc3QgZm9ybSA9ICQoJyNjb250YWN0Rm9ybScpO1xyXG5cclxuXHRcdGZvcm0ub24oJ3N1Ym1pdCcsIChlKSA9PiB7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0Z2V0VXNlckRhdGEoKTtcclxuXHRcdFx0c2hvd01vZGFsKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQkKCcubW9kYWxfX2Nsb3NlJykub24oJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRjbG9zZU1vZGFsKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zdCBzaG93TW9kYWwgPSAoKSA9PiB7XHJcblx0XHRcdCQoJy5tb2RhbCcpWzBdLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcclxuXHRcdFx0ZGlzYWJsZVNjcm9sbCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGNsb3NlTW9kYWwgPSAoKSA9PiB7XHJcblx0XHRcdCQoJy5tb2RhbCcpWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcclxuXHRcdFx0ZW5hYmxlU2Nyb2xsKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgZ2V0VXNlckRhdGEgPSAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHVzZXJEYXRhID0ge307XHJcblx0XHRcdEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZm9ybVswXS5lbGVtZW50cywgKGVsKSA9PiB7XHJcblx0XHRcdFx0aWYoIWVsLnZhbHVlKSByZXR1cm47XHJcblx0XHRcdFx0dXNlckRhdGFbZWwubmFtZV0gPSBlbC52YWx1ZTtcclxuXHRcdFx0XHRlbC52YWx1ZSA9ICcnO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHRyZXR1cm4gdXNlckRhdGE7XHJcblx0XHR9O1xyXG5cclxuXHRcdGNvbnN0IHNlcnZpY2VzVGV4dHMgPSAkKCcuZ3JpZC1pdGVtX190ZXh0Jyk7XHJcblxyXG5cdFx0Y29uc3QgYXJyID0gQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKHNlcnZpY2VzVGV4dHMgLGVsID0+IHtcclxuXHRcdFx0bGV0IGEgPSBlbC5pbm5lclRleHQuc3BsaXQoJycpO1xyXG5cdFx0XHRpZihhLmxlbmd0aCA8IDg1KSByZXR1cm4gZWwuaW5uZXJUZXh0O1xyXG5cdFx0XHRsZXQgbmV3QSA9IGEuc2xpY2UoMCwgODUpO1xyXG5cdFx0XHRsZXQgaW5kZXggPSBuZXdBLmxhc3RJbmRleE9mKCcgJyk7XHJcblx0XHRcdHJldHVybiBuZXdBLnNsaWNlKDAsIGluZGV4KS5qb2luKCcnKSArICcuLi4nO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChzZXJ2aWNlc1RleHRzLCAoZWwsIGlkeCkgPT4ge1xyXG5cdFx0XHRlbC5pbm5lclRleHQgPSBhcnJbaWR4XTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsICgpID0+IHtcclxuXHRcdFx0c2V0TWVudUZpeGVkKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zdCBzZXRNZW51Rml4ZWQgPSAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IG5hdmJhciA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ25hdmlnYXRpb24nKVswXTtcclxuXHRcdFx0aWYod2luZG93LnBhZ2VZT2Zmc2V0ID49IDM0KXtcclxuXHRcdFx0XHRuYXZiYXIuY2xhc3NMaXN0LmFkZCgnZml4ZWQtdG9wJyk7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0bmF2YmFyLmNsYXNzTGlzdC5yZW1vdmUoJ2ZpeGVkLXRvcCcpO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdGxldCBwcm9ncmVzcyA9IDA7XHJcblxyXG5cdFx0ZnVuY3Rpb24gc3RlcCgpIHtcclxuXHRcdFx0Y29uc3QgcHJvZ3Jlc3NiYXIgPSAkKCcjcHJvZ3Jlc3NiYXInKVswXTtcclxuXHRcdFx0bGV0IHByb2dyZXNzID0gTWF0aC5mbG9vcih3aW5kb3cuc2Nyb2xsWSAqIDEwMCAvIChkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCAtIHdpbmRvdy5pbm5lckhlaWdodCkpO1xyXG5cdFx0XHRpZihwcm9ncmVzcyA8PSAxMDApIHtcclxuXHRcdFx0XHRwcm9ncmVzc2Jhci5zdHlsZS50cmFuc2Zvcm0gPSBgdHJhbnNsYXRlWCgtJHsxMDAgLSBwcm9ncmVzc30lKWA7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0ZG9jdW1lbnQub25zY3JvbGwgPSAoKSA9PiB7XHJcblx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShzdGVwKTtcclxuXHRcdH07XHJcblxyXG5cdFx0Y29uc3QgbW9iaWxlTWVudUJ1dHRvbiA9ICQoJy5uYXZiYXItdG9nZ2xlcicpO1xyXG5cdFx0Y29uc3QgbW9iaWxlTWVudSA9ICQoJyNuYXZiYXInKTtcclxuXHJcblx0XHRtb2JpbGVNZW51QnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRtb2JpbGVNZW51LnRvZ2dsZUNsYXNzKCdvcGVuJyk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQkKCcubmF2aWdhdGlvbl9fbGluaycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpe1xyXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0XHRcdGNvbnN0IHRvcCA9ICQoJCh0aGlzKS5hdHRyKCdocmVmJykpWzBdLm9mZnNldFRvcDtcclxuXHRcdFx0d2luZG93LnNjcm9sbFRvKHtcclxuXHRcdFx0XHR0b3A6IHRvcCxcclxuXHRcdFx0XHRiZWhhdmlvcjogJ3Ntb290aCdcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQkKCcudXAnKS5vbignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdHdpbmRvdy5zY3JvbGxUbyh7XHJcblx0XHRcdFx0dG9wOiAwLFxyXG5cdFx0XHRcdGJlaGF2aW9yOiAnc21vb3RoJ1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHJcblxyXG4vLyBsZWZ0OiAzNywgdXA6IDM4LCByaWdodDogMzksIGRvd246IDQwLFxyXG4vLyBzcGFjZWJhcjogMzIsIHBhZ2V1cDogMzMsIHBhZ2Vkb3duOiAzNCwgZW5kOiAzNSwgaG9tZTogMzZcclxudmFyIGtleXMgPSB7Mzc6IDEsIDM4OiAxLCAzOTogMSwgNDA6IDF9O1xyXG5cclxuZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZSkge1xyXG5cdGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcclxuXHRpZiAoZS5wcmV2ZW50RGVmYXVsdClcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRlLnJldHVyblZhbHVlID0gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHByZXZlbnREZWZhdWx0Rm9yU2Nyb2xsS2V5cyhlKSB7XHJcblx0aWYgKGtleXNbZS5rZXlDb2RlXSkge1xyXG5cdFx0cHJldmVudERlZmF1bHQoZSk7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNhYmxlU2Nyb2xsKCkge1xyXG4gIGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikgLy8gb2xkZXIgRkZcclxuICBcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Nb3VzZVNjcm9sbCcsIHByZXZlbnREZWZhdWx0LCBmYWxzZSk7XHJcbiAgd2luZG93Lm9ud2hlZWwgPSBwcmV2ZW50RGVmYXVsdDsgLy8gbW9kZXJuIHN0YW5kYXJkXHJcbiAgd2luZG93Lm9ubW91c2V3aGVlbCA9IGRvY3VtZW50Lm9ubW91c2V3aGVlbCA9IHByZXZlbnREZWZhdWx0OyAvLyBvbGRlciBicm93c2VycywgSUVcclxuICB3aW5kb3cub250b3VjaG1vdmUgID0gcHJldmVudERlZmF1bHQ7IC8vIG1vYmlsZVxyXG4gIGRvY3VtZW50Lm9ua2V5ZG93biAgPSBwcmV2ZW50RGVmYXVsdEZvclNjcm9sbEtleXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVuYWJsZVNjcm9sbCgpIHtcclxuXHRpZiAod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIpXHJcblx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignRE9NTW91c2VTY3JvbGwnLCBwcmV2ZW50RGVmYXVsdCwgZmFsc2UpO1xyXG5cdHdpbmRvdy5vbm1vdXNld2hlZWwgPSBkb2N1bWVudC5vbm1vdXNld2hlZWwgPSBudWxsO1xyXG5cdHdpbmRvdy5vbndoZWVsID0gbnVsbDtcclxuXHR3aW5kb3cub250b3VjaG1vdmUgPSBudWxsO1xyXG5cdGRvY3VtZW50Lm9ua2V5ZG93biA9IG51bGw7XHJcbn0iXSwiZmlsZSI6InNjcmlwdC5qcyJ9
