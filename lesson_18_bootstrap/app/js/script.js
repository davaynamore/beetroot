'use strict';

console.dir($('#welcome'));
var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
window.requestAnimationFrame = requestAnimationFrame;
$('.partners__list').slick({
  autoplay: true,
  slidesToShow: 6,
  arrows: false
});
var form = $('#contactForm');
form.on('submit', function (e) {
  e.preventDefault();
  getUserData();
  showModal();
});
$('.modal__close').on('click', function () {
  closeModal();
});

var showModal = function showModal() {
  $('.modal')[0].classList.add('open');
  disableScroll();
};

var closeModal = function closeModal() {
  $('.modal')[0].classList.remove('open');
  enableScroll();
};

var getUserData = function getUserData() {
  var userData = {};
  Array.prototype.forEach.call(form[0].elements, function (el) {
    if (!el.value) return;
    userData[el.name] = el.value;
    el.value = '';
  });
  console.log(userData);
  return userData;
};

var servicesTexts = $('.grid-item__text');
var arr = Array.prototype.map.call(servicesTexts, function (el) {
  var a = el.innerText.split('');
  if (a.length < 85) return el.innerText;
  var newA = a.slice(0, 85);
  var index = newA.lastIndexOf(' ');
  return newA.slice(0, index).join('') + '...';
});
Array.prototype.forEach.call(servicesTexts, function (el, idx) {
  el.innerText = arr[idx];
});
document.addEventListener('scroll', function () {
  setMenuFixed();
});

var setMenuFixed = function setMenuFixed() {
  var navbar = document.getElementsByClassName('navigation')[0];

  if (window.pageYOffset >= 34) {
    navbar.classList.add('fixed-top');
  } else {
    navbar.classList.remove('fixed-top');
  }
};

var progress = 0;

function step() {
  var progressbar = $('#progressbar')[0];
  var progress = Math.floor(window.scrollY * 100 / (document.body.scrollHeight - window.innerHeight));

  if (progress <= 100) {
    progressbar.style.transform = "translateX(-".concat(100 - progress, "%)");
  }
}

;

document.onscroll = function () {
  requestAnimationFrame(step);
};

var mobileMenuButton = $('.navbar-toggler');
var mobileMenu = $('#navbar');
mobileMenuButton.on('click', function () {
  mobileMenu.toggleClass('open');
});
$('.navigation__link').on('click', function (e) {
  e.preventDefault();
  var top = $($(this).attr('href'))[0].offsetTop;
  window.scrollTo({
    top: top,
    behavior: 'smooth'
  });
});
$('.up').on('click', function () {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
}); // left: 37, up: 38, right: 39, down: 40,
// spacebar: 32, pageup: 33, pagedown: 34, end: 35, home: 36

var keys = {
  37: 1,
  38: 1,
  39: 1,
  40: 1
};

function preventDefault(e) {
  e = e || window.event;
  if (e.preventDefault) e.preventDefault();
  e.returnValue = false;
}

function preventDefaultForScrollKeys(e) {
  if (keys[e.keyCode]) {
    preventDefault(e);
    return false;
  }
}

function disableScroll() {
  if (window.addEventListener) // older FF
    window.addEventListener('DOMMouseScroll', preventDefault, false);
  window.onwheel = preventDefault; // modern standard

  window.onmousewheel = document.onmousewheel = preventDefault; // older browsers, IE

  window.ontouchmove = preventDefault; // mobile

  document.onkeydown = preventDefaultForScrollKeys;
}

function enableScroll() {
  if (window.removeEventListener) window.removeEventListener('DOMMouseScroll', preventDefault, false);
  window.onmousewheel = document.onmousewheel = null;
  window.onwheel = null;
  window.ontouchmove = null;
  document.onkeydown = null;
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJjb25zb2xlIiwiZGlyIiwiJCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndpbmRvdyIsIm1velJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwic2xpY2siLCJhdXRvcGxheSIsInNsaWRlc1RvU2hvdyIsImFycm93cyIsImZvcm0iLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImdldFVzZXJEYXRhIiwic2hvd01vZGFsIiwiY2xvc2VNb2RhbCIsImNsYXNzTGlzdCIsImFkZCIsImRpc2FibGVTY3JvbGwiLCJyZW1vdmUiLCJlbmFibGVTY3JvbGwiLCJ1c2VyRGF0YSIsIkFycmF5IiwicHJvdG90eXBlIiwiZm9yRWFjaCIsImNhbGwiLCJlbGVtZW50cyIsImVsIiwidmFsdWUiLCJuYW1lIiwibG9nIiwic2VydmljZXNUZXh0cyIsImFyciIsIm1hcCIsImEiLCJpbm5lclRleHQiLCJzcGxpdCIsImxlbmd0aCIsIm5ld0EiLCJzbGljZSIsImluZGV4IiwibGFzdEluZGV4T2YiLCJqb2luIiwiaWR4IiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0TWVudUZpeGVkIiwibmF2YmFyIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInBhZ2VZT2Zmc2V0IiwicHJvZ3Jlc3MiLCJzdGVwIiwicHJvZ3Jlc3NiYXIiLCJNYXRoIiwiZmxvb3IiLCJzY3JvbGxZIiwiYm9keSIsInNjcm9sbEhlaWdodCIsImlubmVySGVpZ2h0Iiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJvbnNjcm9sbCIsIm1vYmlsZU1lbnVCdXR0b24iLCJtb2JpbGVNZW51IiwidG9nZ2xlQ2xhc3MiLCJ0b3AiLCJhdHRyIiwib2Zmc2V0VG9wIiwic2Nyb2xsVG8iLCJiZWhhdmlvciIsImtleXMiLCJldmVudCIsInJldHVyblZhbHVlIiwicHJldmVudERlZmF1bHRGb3JTY3JvbGxLZXlzIiwia2V5Q29kZSIsIm9ud2hlZWwiLCJvbm1vdXNld2hlZWwiLCJvbnRvdWNobW92ZSIsIm9ua2V5ZG93biIsInJlbW92ZUV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiJBQUFFOztBQUVBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWUMsQ0FBQyxDQUFDLFVBQUQsQ0FBYjtBQUVBLElBQU1DLHFCQUFxQixHQUFHQyxNQUFNLENBQUNELHFCQUFQLElBQzlCQyxNQUFNLENBQUNDLHdCQUR1QixJQUU5QkQsTUFBTSxDQUFDRSwyQkFGdUIsSUFHOUJGLE1BQU0sQ0FBQ0csdUJBSFA7QUFJQUgsTUFBTSxDQUFDRCxxQkFBUCxHQUErQkEscUJBQS9CO0FBRUFELENBQUMsQ0FBQyxpQkFBRCxDQUFELENBQXFCTSxLQUFyQixDQUEyQjtBQUMxQkMsRUFBQUEsUUFBUSxFQUFFLElBRGdCO0FBRTFCQyxFQUFBQSxZQUFZLEVBQUUsQ0FGWTtBQUcxQkMsRUFBQUEsTUFBTSxFQUFFO0FBSGtCLENBQTNCO0FBTUEsSUFBTUMsSUFBSSxHQUFHVixDQUFDLENBQUMsY0FBRCxDQUFkO0FBRUFVLElBQUksQ0FBQ0MsRUFBTCxDQUFRLFFBQVIsRUFBa0IsVUFBQ0MsQ0FBRCxFQUFPO0FBQ3hCQSxFQUFBQSxDQUFDLENBQUNDLGNBQUY7QUFDQUMsRUFBQUEsV0FBVztBQUNYQyxFQUFBQSxTQUFTO0FBQ1QsQ0FKRDtBQU1BZixDQUFDLENBQUMsZUFBRCxDQUFELENBQW1CVyxFQUFuQixDQUFzQixPQUF0QixFQUErQixZQUFNO0FBQ3BDSyxFQUFBQSxVQUFVO0FBQ1YsQ0FGRDs7QUFJQSxJQUFNRCxTQUFTLEdBQUcsU0FBWkEsU0FBWSxHQUFNO0FBQ3ZCZixFQUFBQSxDQUFDLENBQUMsUUFBRCxDQUFELENBQVksQ0FBWixFQUFlaUIsU0FBZixDQUF5QkMsR0FBekIsQ0FBNkIsTUFBN0I7QUFDQUMsRUFBQUEsYUFBYTtBQUNiLENBSEQ7O0FBS0EsSUFBTUgsVUFBVSxHQUFHLFNBQWJBLFVBQWEsR0FB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QTZELEtBQTdEO0FBQ0RYLEVBQUFBLE1BQU0sQ0FBQzJFLFlBQVAsR0FBc0JoQyxRQUFRLENBQUNnQyxZQUFULEdBQXdCLElBQTlDO0FBQ0EzRSxFQUFBQSxNQUFNLENBQUMwRSxPQUFQLEdBQWlCLElBQWpCO0FBQ0ExRSxFQUFBQSxNQUFNLENBQUM0RSxXQUFQLEdBQXFCLElBQXJCO0FBQ0FqQyxFQUFBQSxRQUFRLENBQUNrQyxTQUFULEdBQXFCLElBQXJCO0FBQ0EiLCJzb3VyY2VzQ29udGVudCI6WyJcdFx0J3VzZSBzdHJpY3QnO1xyXG5cclxuXHRcdGNvbnNvbGUuZGlyKCQoJyN3ZWxjb21lJykpO1xyXG5cclxuXHRcdGNvbnN0IHJlcXVlc3RBbmltYXRpb25GcmFtZSA9IHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuXHRcdHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuXHRcdHdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUgfHxcclxuXHRcdHdpbmRvdy5tc1JlcXVlc3RBbmltYXRpb25GcmFtZTtcclxuXHRcdHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XHJcblxyXG5cdFx0JCgnLnBhcnRuZXJzX19saXN0Jykuc2xpY2soe1xyXG5cdFx0XHRhdXRvcGxheTogdHJ1ZSxcclxuXHRcdFx0c2xpZGVzVG9TaG93OiA2LFxyXG5cdFx0XHRhcnJvd3M6IGZhbHNlXHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zdCBmb3JtID0gJCgnI2NvbnRhY3RGb3JtJyk7XHJcblxyXG5cdFx0Zm9ybS5vbignc3VibWl0JywgKGUpID0+IHtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRnZXRVc2VyRGF0YSgpO1xyXG5cdFx0XHRzaG93TW9kYWwoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdCQoJy5tb2RhbF9fY2xvc2UnKS5vbignY2xpY2snLCAoKSA9PiB7XHJcblx0XHRcdGNsb3NlTW9kYWwoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGNvbnN0IHNob3dNb2RhbCA9ICgpID0+IHtcclxuXHRcdFx0JCgnLm1vZGFsJylbMF0uY2xhc3NMaXN0LmFkZCgnb3BlbicpO1xyXG5cdFx0XHRkaXNhYmxlU2Nyb2xsKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgY2xvc2VNb2RhbCA9ICgpID0+IHtcclxuXHRcdFx0JCgnLm1vZGFsJylbMF0uY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xyXG5cdFx0XHRlbmFibGVTY3JvbGwoKTtcclxuXHRcdH1cclxuXHJcblx0XHRjb25zdCBnZXRVc2VyRGF0YSA9ICgpID0+IHtcclxuXHRcdFx0Y29uc3QgdXNlckRhdGEgPSB7fTtcclxuXHRcdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChmb3JtWzBdLmVsZW1lbnRzLCAoZWwpID0+IHtcclxuXHRcdFx0XHRpZighZWwudmFsdWUpIHJldHVybjtcclxuXHRcdFx0XHR1c2VyRGF0YVtlbC5uYW1lXSA9IGVsLnZhbHVlO1xyXG5cdFx0XHRcdGVsLnZhbHVlID0gJyc7XHJcblx0XHRcdH0pXHJcblx0XHRcdGNvbnNvbGUubG9nKHVzZXJEYXRhKTtcclxuXHRcdFx0cmV0dXJuIHVzZXJEYXRhO1xyXG5cdFx0fTtcclxuXHJcblx0XHRjb25zdCBzZXJ2aWNlc1RleHRzID0gJCgnLmdyaWQtaXRlbV9fdGV4dCcpO1xyXG5cclxuXHRcdGNvbnN0IGFyciA9IEFycmF5LnByb3RvdHlwZS5tYXAuY2FsbChzZXJ2aWNlc1RleHRzICxlbCA9PiB7XHJcblx0XHRcdGxldCBhID0gZWwuaW5uZXJUZXh0LnNwbGl0KCcnKTtcclxuXHRcdFx0aWYoYS5sZW5ndGggPCA4NSkgcmV0dXJuIGVsLmlubmVyVGV4dDtcclxuXHRcdFx0bGV0IG5ld0EgPSBhLnNsaWNlKDAsIDg1KTtcclxuXHRcdFx0bGV0IGluZGV4ID0gbmV3QS5sYXN0SW5kZXhPZignICcpO1xyXG5cdFx0XHRyZXR1cm4gbmV3QS5zbGljZSgwLCBpbmRleCkuam9pbignJykgKyAnLi4uJztcclxuXHRcdH0pO1xyXG5cclxuXHRcdEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoc2VydmljZXNUZXh0cywgKGVsLCBpZHgpID0+IHtcclxuXHRcdFx0ZWwuaW5uZXJUZXh0ID0gYXJyW2lkeF07XHJcblx0XHR9KTtcclxuXHJcblx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCAoKSA9PiB7XHJcblx0XHRcdHNldE1lbnVGaXhlZCgpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29uc3Qgc2V0TWVudUZpeGVkID0gKCkgPT4ge1xyXG5cdFx0XHRjb25zdCBuYXZiYXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCduYXZpZ2F0aW9uJylbMF07XHJcblx0XHRcdGlmKHdpbmRvdy5wYWdlWU9mZnNldCA+PSAzNCl7XHJcblx0XHRcdFx0bmF2YmFyLmNsYXNzTGlzdC5hZGQoJ2ZpeGVkLXRvcCcpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdG5hdmJhci5jbGFzc0xpc3QucmVtb3ZlKCdmaXhlZC10b3AnKTtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHRsZXQgcHJvZ3Jlc3MgPSAwO1xyXG5cclxuXHRcdGZ1bmN0aW9uIHN0ZXAoKSB7XHJcblx0XHRcdGNvbnN0IHByb2dyZXNzYmFyID0gJCgnI3Byb2dyZXNzYmFyJylbMF07XHJcblx0XHRcdGxldCBwcm9ncmVzcyA9IE1hdGguZmxvb3Iod2luZG93LnNjcm9sbFkgKiAxMDAgLyAoZG9jdW1lbnQuYm9keS5zY3JvbGxIZWlnaHQgLSB3aW5kb3cuaW5uZXJIZWlnaHQpKTtcclxuXHRcdFx0aWYocHJvZ3Jlc3MgPD0gMTAwKSB7XHJcblx0XHRcdFx0cHJvZ3Jlc3NiYXIuc3R5bGUudHJhbnNmb3JtID0gYHRyYW5zbGF0ZVgoLSR7MTAwIC0gcHJvZ3Jlc3N9JSlgO1xyXG5cdFx0XHR9XHJcblx0XHR9O1xyXG5cclxuXHRcdGRvY3VtZW50Lm9uc2Nyb2xsID0gKCkgPT4ge1xyXG5cdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc3RlcCk7XHJcblx0XHR9O1xyXG5cclxuXHRcdGNvbnN0IG1vYmlsZU1lbnVCdXR0b24gPSAkKCcubmF2YmFyLXRvZ2dsZXInKTtcclxuXHRcdGNvbnN0IG1vYmlsZU1lbnUgPSAkKCcjbmF2YmFyJyk7XHJcblxyXG5cdFx0bW9iaWxlTWVudUJ1dHRvbi5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuXHRcdFx0bW9iaWxlTWVudS50b2dnbGVDbGFzcygnb3BlbicpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JCgnLm5hdmlnYXRpb25fX2xpbmsnKS5vbignY2xpY2snLCBmdW5jdGlvbihlKXtcclxuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0XHRjb25zdCB0b3AgPSAkKCQodGhpcykuYXR0cignaHJlZicpKVswXS5vZmZzZXRUb3A7XHJcblx0XHRcdHdpbmRvdy5zY3JvbGxUbyh7XHJcblx0XHRcdFx0dG9wOiB0b3AsXHJcblx0XHRcdFx0YmVoYXZpb3I6ICdzbW9vdGgnXHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0JCgnLnVwJykub24oJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHR3aW5kb3cuc2Nyb2xsVG8oe1xyXG5cdFx0XHRcdHRvcDogMCxcclxuXHRcdFx0XHRiZWhhdmlvcjogJ3Ntb290aCdcclxuXHRcdFx0fSk7XHJcblx0XHR9KTtcclxuXHJcblxyXG5cclxuLy8gbGVmdDogMzcsIHVwOiAzOCwgcmlnaHQ6IDM5LCBkb3duOiA0MCxcclxuLy8gc3BhY2ViYXI6IDMyLCBwYWdldXA6IDMzLCBwYWdlZG93bjogMzQsIGVuZDogMzUsIGhvbWU6IDM2XHJcbmNvbnN0IGtleXMgPSB7Mzc6IDEsIDM4OiAxLCAzOTogMSwgNDA6IDF9O1xyXG5cclxuZnVuY3Rpb24gcHJldmVudERlZmF1bHQoZSkge1xyXG5cdGUgPSBlIHx8IHdpbmRvdy5ldmVudDtcclxuXHRpZiAoZS5wcmV2ZW50RGVmYXVsdClcclxuXHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRlLnJldHVyblZhbHVlID0gZmFsc2U7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHByZXZlbnREZWZhdWx0Rm9yU2Nyb2xsS2V5cyhlKSB7XHJcblx0aWYgKGtleXNbZS5rZXlDb2RlXSkge1xyXG5cdFx0cHJldmVudERlZmF1bHQoZSk7XHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNhYmxlU2Nyb2xsKCkge1xyXG4gIGlmICh3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcikgLy8gb2xkZXIgRkZcclxuICBcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdET01Nb3VzZVNjcm9sbCcsIHByZXZlbnREZWZhdWx0LCBmYWxzZSk7XHJcbiAgd2luZG93Lm9ud2hlZWwgPSBwcmV2ZW50RGVmYXVsdDsgLy8gbW9kZXJuIHN0YW5kYXJkXHJcbiAgd2luZG93Lm9ubW91c2V3aGVlbCA9IGRvY3VtZW50Lm9ubW91c2V3aGVlbCA9IHByZXZlbnREZWZhdWx0OyAvLyBvbGRlciBicm93c2VycywgSUVcclxuICB3aW5kb3cub250b3VjaG1vdmUgID0gcHJldmVudERlZmF1bHQ7IC8vIG1vYmlsZVxyXG4gIGRvY3VtZW50Lm9ua2V5ZG93biAgPSBwcmV2ZW50RGVmYXVsdEZvclNjcm9sbEtleXM7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVuYWJsZVNjcm9sbCgpIHtcclxuXHRpZiAod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIpXHJcblx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignRE9NTW91c2VTY3JvbGwnLCBwcmV2ZW50RGVmYXVsdCwgZmFsc2UpO1xyXG5cdHdpbmRvdy5vbm1vdXNld2hlZWwgPSBkb2N1bWVudC5vbm1vdXNld2hlZWwgPSBudWxsO1xyXG5cdHdpbmRvdy5vbndoZWVsID0gbnVsbDtcclxuXHR3aW5kb3cub250b3VjaG1vdmUgPSBudWxsO1xyXG5cdGRvY3VtZW50Lm9ua2V5ZG93biA9IG51bGw7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl0sImZpbGUiOiJzY3JpcHQuanMifQ==
