'use strict';

var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;
window.requestAnimationFrame = requestAnimationFrame;
$('.partners__list').slick({
  autoplay: true,
  slidesToShow: 6,
  arrows: false
});
var form = $('#contactForm');
form.on('submit', function (e) {
  e.preventDefault();
  getUserData();
  showModal();
});
$('.modal__close').on('click', function () {
  closeModal();
});

var showModal = function showModal() {
  $('.modal')[0].classList.add('open');
  disableScroll();
};

var closeModal = function closeModal() {
  $('.modal')[0].classList.remove('open');
  enableScroll();
};

var getUserData = function getUserData() {
  var userData = {};
  Array.prototype.forEach.call(form[0].elements, function (el) {
    if (!el.value) return;
    userData[el.name] = el.value;
    el.value = '';
  });
  console.log(userData);
  return userData;
};

var servicesTexts = $('.grid-item__text');
var arr = Array.prototype.map.call(servicesTexts, function (el) {
  var a = el.innerText.split('');
  if (a.length < 85) return el.innerText;
  var newA = a.slice(0, 85);
  var index = newA.lastIndexOf(' ');
  return newA.slice(0, index).join('') + '...';
});
Array.prototype.forEach.call(servicesTexts, function (el, idx) {
  el.innerText = arr[idx];
});
document.addEventListener('scroll', function () {
  setMenuFixed();
});

var setMenuFixed = function setMenuFixed() {
  var navbar = document.getElementsByClassName('navigation')[0];

  if (window.pageYOffset >= 34) {
    navbar.classList.add('fixed-top');
  } else {
    navbar.classList.remove('fixed-top');
  }
};

var progress = 0;

function step() {
  var progressbar = $('#progressbar')[0];
  var progress = Math.floor(window.scrollY * 100 / (document.body.scrollHeight - window.innerHeight));

  if (progress <= 100) {
    progressbar.style.transform = "translateX(-".concat(100 - progress, "%)");
  }
}

;

document.onscroll = function () {
  requestAnimationFrame(step);
};

var mobileMenuButton = $('.navbar-toggler');
var mobileMenu = $('#navbar');
mobileMenuButton.on('click', function () {
  mobileMenu.toggleClass('open');
});
$('.navigation__link').on('click', function (e) {
  e.preventDefault();
  var top = $($(this).attr('href'))[0].offsetTop;
  window.scrollTo({
    top: top,
    behavior: 'smooth'
  });
});
$('.up').on('click', function () {
  window.scrollTo({
    top: 0,
    behavior: 'smooth'
  });
}); // left: 37, up: 38, right: 39, down: 40,
// spacebar: 32, pageup: 33, pagedown: 34, end: 35, home: 36

var keys = {
  37: 1,
  38: 1,
  39: 1,
  40: 1
};

function preventDefault(e) {
  e = e || window.event;
  if (e.preventDefault) e.preventDefault();
  e.returnValue = false;
}

function preventDefaultForScrollKeys(e) {
  if (keys[e.keyCode]) {
    preventDefault(e);
    return false;
  }
}

function disableScroll() {
  if (window.addEventListener) // older FF
    window.addEventListener('DOMMouseScroll', preventDefault, false);
  window.onwheel = preventDefault; // modern standard

  window.onmousewheel = document.onmousewheel = preventDefault; // older browsers, IE

  window.ontouchmove = preventDefault; // mobile

  document.onkeydown = preventDefaultForScrollKeys;
}

function enableScroll() {
  if (window.removeEventListener) window.removeEventListener('DOMMouseScroll', preventDefault, false);
  window.onmousewheel = document.onmousewheel = null;
  window.onwheel = null;
  window.ontouchmove = null;
  document.onkeydown = null;
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3aW5kb3ciLCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJ3ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtc1JlcXVlc3RBbmltYXRpb25GcmFtZSIsIiQiLCJzbGljayIsImF1dG9wbGF5Iiwic2xpZGVzVG9TaG93IiwiYXJyb3dzIiwiZm9ybSIsIm9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwiZ2V0VXNlckRhdGEiLCJzaG93TW9kYWwiLCJjbG9zZU1vZGFsIiwiY2xhc3NMaXN0IiwiYWRkIiwiZGlzYWJsZVNjcm9sbCIsInJlbW92ZSIsImVuYWJsZVNjcm9sbCIsInVzZXJEYXRhIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJmb3JFYWNoIiwiY2FsbCIsImVsZW1lbnRzIiwiZWwiLCJ2YWx1ZSIsIm5hbWUiLCJjb25zb2xlIiwibG9nIiwic2VydmljZXNUZXh0cyIsImFyciIsIm1hcCIsImEiLCJpbm5lclRleHQiLCJzcGxpdCIsImxlbmd0aCIsIm5ld0EiLCJzbGljZSIsImluZGV4IiwibGFzdEluZGV4T2YiLCJqb2luIiwiaWR4IiwiZG9jdW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0TWVudUZpeGVkIiwibmF2YmFyIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsInBhZ2VZT2Zmc2V0IiwicHJvZ3Jlc3MiLCJzdGVwIiwicHJvZ3Jlc3NiYXIiLCJNYXRoIiwiZmxvb3IiLCJzY3JvbGxZIiwiYm9keSIsInNjcm9sbEhlaWdodCIsImlubmVySGVpZ2h0Iiwic3R5bGUiLCJ0cmFuc2Zvcm0iLCJvbnNjcm9sbCIsIm1vYmlsZU1lbnVCdXR0b24iLCJtb2JpbGVNZW51IiwidG9nZ2xlQ2xhc3MiLCJ0b3AiLCJhdHRyIiwib2Zmc2V0VG9wIiwic2Nyb2xsVG8iLCJiZWhhdmlvciIsImtleXMiLCJldmVudCIsInJldHVyblZhbHVlIiwicHJldmVudERlZmF1bHRGb3JTY3JvbGxLZXlzIiwia2V5Q29kZSIsIm9ud2hlZWwiLCJvbm1vdXNld2hlZWwiLCJvbnRvdWNobW92ZSIsIm9ua2V5ZG93biIsInJlbW92ZUV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiJBQUFFOztBQUVBLElBQU1BLHFCQUFxQixHQUFHQyxNQUFNLENBQUNELHFCQUFQLElBQzlCQyxNQUFNLENBQUNDLHdCQUR1QixJQUU5QkQsTUFBTSxDQUFDRSwyQkFGdUIsSUFHOUJGLE1BQU0sQ0FBQ0csdUJBSFA7QUFJQUgsTUFBTSxDQUFDRCxxQkFBUCxHQUErQkEscUJBQS9CO0FBRUFLLENBQUMsQ0FBQyxpQkFBRCxDQUFELENBQXFCQyxLQUFyQixDQUEyQjtBQUMxQkMsRUFBQUEsUUFBUSxFQUFFLElBRGdCO0FBRTFCQyxFQUFBQSxZQUFZLEVBQUUsQ0FGWTtBQUcxQkMsRUFBQUEsTUFBTSxFQUFFO0FBSGtCLENBQTNCO0FBTUEsSUFBTUMsSUFBSSxHQUFHTCxDQUFDLENBQUMsY0FBRCxDQUFkO0FBRUFLLElBQUksQ0FBQ0MsRUFBTCxDQUFRLFFBQVIsRUFBa0IsVUFBQ0MsQ0FBRCxFQUFPO0FBQ3hCQSxFQUFBQSxDQUFDLENBQUNDLGNBQUY7QUFDQUMsRUFBQUEsV0FBVztBQUNYQyxFQUFBQSxTQUFTO0FBQ1QsQ0FKRDtBQU1BVixDQUFDLENBQUMsZUFBRCxDQUFELENBQW1CTSxFQUFuQixDQUFzQixPQUF0QixFQUErQixZQUFNO0FBQ3BDSyxFQUFBQSxVQUFVO0FBQ1YsQ0FGRDs7QUFJQSxJQUFNRCxTQUFTLEdBQUcsU0FBWkEsU0FBWSxHQUFNO0FBQ3ZCVixFQUFBQSxDQUFDLENBQUMsUUFBRCxDQUFELENBQVksQ0FBWixFQUFlWSxTQUFmLENBQXlCQyxHQUF6QixDQUE2QixNQUE3QjtBQUNBQyxFQUFBQSxhQUFhO0FBQ2IsQ0FIRDs7QUFLQSxJQUFNSCxVQUFVLEdBQUcsU0FBYkEsVUFBYSxHQUFNO0FBQ3hCWCxFQUFBQSxDQUFDLENBQUMsUUFBRCxDQUFELENBQVksQ0FBWixFQUFlWSxTQUFm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WUFBVCxHQUF3QixJQUE5QztBQUNBN0UsRUFBQUEsTUFBTSxDQUFDNEUsT0FBUCxHQUFpQixJQUFqQjtBQUNBNUUsRUFBQUEsTUFBTSxDQUFDOEUsV0FBUCxHQUFxQixJQUFyQjtBQUNBakMsRUFBQUEsUUFBUSxDQUFDa0MsU0FBVCxHQUFxQixJQUFyQjtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsiXHRcdCd1c2Ugc3RyaWN0JztcclxuXHJcblx0XHRjb25zdCByZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcblx0XHR3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcblx0XHR3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XHJcblx0XHR3aW5kb3cubXNSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XHJcblx0XHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gcmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xyXG5cclxuXHRcdCQoJy5wYXJ0bmVyc19fbGlzdCcpLnNsaWNrKHtcclxuXHRcdFx0YXV0b3BsYXk6IHRydWUsXHJcblx0XHRcdHNsaWRlc1RvU2hvdzogNixcclxuXHRcdFx0YXJyb3dzOiBmYWxzZVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Y29uc3QgZm9ybSA9ICQoJyNjb250YWN0Rm9ybScpO1xyXG5cclxuXHRcdGZvcm0ub24oJ3N1Ym1pdCcsIChlKSA9PiB7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0Z2V0VXNlckRhdGEoKTtcclxuXHRcdFx0c2hvd01vZGFsKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQkKCcubW9kYWxfX2Nsb3NlJykub24oJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHRjbG9zZU1vZGFsKCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRjb25zdCBzaG93TW9kYWwgPSAoKSA9PiB7XHJcblx0XHRcdCQoJy5tb2RhbCcpWzBdLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcclxuXHRcdFx0ZGlzYWJsZVNjcm9sbCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IGNsb3NlTW9kYWwgPSAoKSA9PiB7XHJcblx0XHRcdCQoJy5tb2RhbCcpWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcclxuXHRcdFx0ZW5hYmxlU2Nyb2xsKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgZ2V0VXNlckRhdGEgPSAoKSA9PiB7XHJcblx0XHRcdGNvbnN0IHVzZXJEYXRhID0ge307XHJcblx0XHRcdEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZm9ybVswXS5lbGVtZW50cywgKGVsKSA9PiB7XHJcblx0XHRcdFx0aWYoIWVsLnZhbHVlKSByZXR1cm47XHJcblx0XHRcdFx0dXNlckRhdGFbZWwubmFtZV0gPSBlbC52YWx1ZTtcclxuXHRcdFx0XHRlbC52YWx1ZSA9ICcnO1xyXG5cdFx0XHR9KVxyXG5cdFx0XHRjb25zb2xlLmxvZyh1c2VyRGF0YSk7XHJcblx0XHRcdHJldHVybiB1c2VyRGF0YTtcclxuXHRcdH07XHJcblxyXG5cdFx0Y29uc3Qgc2VydmljZXNUZXh0cyA9ICQoJy5ncmlkLWl0ZW1fX3RleHQnKTtcclxuXHJcblx0XHRjb25zdCBhcnIgPSBBcnJheS5wcm90b3R5cGUubWFwLmNhbGwoc2VydmljZXNUZXh0cyAsZWwgPT4ge1xyXG5cdFx0XHRsZXQgYSA9IGVsLmlubmVyVGV4dC5zcGxpdCgnJyk7XHJcblx0XHRcdGlmKGEubGVuZ3RoIDwgODUpIHJldHVybiBlbC5pbm5lclRleHQ7XHJcblx0XHRcdGxldCBuZXdBID0gYS5zbGljZSgwLCA4NSk7XHJcblx0XHRcdGxldCBpbmRleCA9IG5ld0EubGFzdEluZGV4T2YoJyAnKTtcclxuXHRcdFx0cmV0dXJuIG5ld0Euc2xpY2UoMCwgaW5kZXgpLmpvaW4oJycpICsgJy4uLic7XHJcblx0XHR9KTtcclxuXHJcblx0XHRBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHNlcnZpY2VzVGV4dHMsIChlbCwgaWR4KSA9PiB7XHJcblx0XHRcdGVsLmlubmVyVGV4dCA9IGFycltpZHhdO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgKCkgPT4ge1xyXG5cdFx0XHRzZXRNZW51Rml4ZWQoKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGNvbnN0IHNldE1lbnVGaXhlZCA9ICgpID0+IHtcclxuXHRcdFx0Y29uc3QgbmF2YmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbmF2aWdhdGlvbicpWzBdO1xyXG5cdFx0XHRpZih3aW5kb3cucGFnZVlPZmZzZXQgPj0gMzQpe1xyXG5cdFx0XHRcdG5hdmJhci5jbGFzc0xpc3QuYWRkKCdmaXhlZC10b3AnKTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRuYXZiYXIuY2xhc3NMaXN0LnJlbW92ZSgnZml4ZWQtdG9wJyk7XHJcblx0XHRcdH1cclxuXHRcdH07XHJcblxyXG5cdFx0bGV0IHByb2dyZXNzID0gMDtcclxuXHJcblx0XHRmdW5jdGlvbiBzdGVwKCkge1xyXG5cdFx0XHRjb25zdCBwcm9ncmVzc2JhciA9ICQoJyNwcm9ncmVzc2JhcicpWzBdO1xyXG5cdFx0XHRsZXQgcHJvZ3Jlc3MgPSBNYXRoLmZsb29yKHdpbmRvdy5zY3JvbGxZICogMTAwIC8gKGRvY3VtZW50LmJvZHkuc2Nyb2xsSGVpZ2h0IC0gd2luZG93LmlubmVySGVpZ2h0KSk7XHJcblx0XHRcdGlmKHByb2dyZXNzIDw9IDEwMCkge1xyXG5cdFx0XHRcdHByb2dyZXNzYmFyLnN0eWxlLnRyYW5zZm9ybSA9IGB0cmFuc2xhdGVYKC0kezEwMCAtIHByb2dyZXNzfSUpYDtcclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHJcblx0XHRkb2N1bWVudC5vbnNjcm9sbCA9ICgpID0+IHtcclxuXHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKHN0ZXApO1xyXG5cdFx0fTtcclxuXHJcblx0XHRjb25zdCBtb2JpbGVNZW51QnV0dG9uID0gJCgnLm5hdmJhci10b2dnbGVyJyk7XHJcblx0XHRjb25zdCBtb2JpbGVNZW51ID0gJCgnI25hdmJhcicpO1xyXG5cclxuXHRcdG1vYmlsZU1lbnVCdXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcblx0XHRcdG1vYmlsZU1lbnUudG9nZ2xlQ2xhc3MoJ29wZW4nKTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdCQoJy5uYXZpZ2F0aW9uX19saW5rJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7XHJcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcclxuXHRcdFx0Y29uc3QgdG9wID0gJCgkKHRoaXMpLmF0dHIoJ2hyZWYnKSlbMF0ub2Zmc2V0VG9wO1xyXG5cdFx0XHR3aW5kb3cuc2Nyb2xsVG8oe1xyXG5cdFx0XHRcdHRvcDogdG9wLFxyXG5cdFx0XHRcdGJlaGF2aW9yOiAnc21vb3RoJ1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdCQoJy51cCcpLm9uKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0d2luZG93LnNjcm9sbFRvKHtcclxuXHRcdFx0XHR0b3A6IDAsXHJcblx0XHRcdFx0YmVoYXZpb3I6ICdzbW9vdGgnXHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblxyXG5cclxuXHJcbi8vIGxlZnQ6IDM3LCB1cDogMzgsIHJpZ2h0OiAzOSwgZG93bjogNDAsXHJcbi8vIHNwYWNlYmFyOiAzMiwgcGFnZXVwOiAzMywgcGFnZWRvd246IDM0LCBlbmQ6IDM1LCBob21lOiAzNlxyXG5jb25zdCBrZXlzID0gezM3OiAxLCAzODogMSwgMzk6IDEsIDQwOiAxfTtcclxuXHJcbmZ1bmN0aW9uIHByZXZlbnREZWZhdWx0KGUpIHtcclxuXHRlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XHJcblx0aWYgKGUucHJldmVudERlZmF1bHQpXHJcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XHJcblx0ZS5yZXR1cm5WYWx1ZSA9IGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwcmV2ZW50RGVmYXVsdEZvclNjcm9sbEtleXMoZSkge1xyXG5cdGlmIChrZXlzW2Uua2V5Q29kZV0pIHtcclxuXHRcdHByZXZlbnREZWZhdWx0KGUpO1xyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxufVxyXG5cclxuZnVuY3Rpb24gZGlzYWJsZVNjcm9sbCgpIHtcclxuICBpZiAod2luZG93LmFkZEV2ZW50TGlzdGVuZXIpIC8vIG9sZGVyIEZGXHJcbiAgXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NTW91c2VTY3JvbGwnLCBwcmV2ZW50RGVmYXVsdCwgZmFsc2UpO1xyXG4gIHdpbmRvdy5vbndoZWVsID0gcHJldmVudERlZmF1bHQ7IC8vIG1vZGVybiBzdGFuZGFyZFxyXG4gIHdpbmRvdy5vbm1vdXNld2hlZWwgPSBkb2N1bWVudC5vbm1vdXNld2hlZWwgPSBwcmV2ZW50RGVmYXVsdDsgLy8gb2xkZXIgYnJvd3NlcnMsIElFXHJcbiAgd2luZG93Lm9udG91Y2htb3ZlICA9IHByZXZlbnREZWZhdWx0OyAvLyBtb2JpbGVcclxuICBkb2N1bWVudC5vbmtleWRvd24gID0gcHJldmVudERlZmF1bHRGb3JTY3JvbGxLZXlzO1xyXG59XHJcblxyXG5mdW5jdGlvbiBlbmFibGVTY3JvbGwoKSB7XHJcblx0aWYgKHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKVxyXG5cdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ0RPTU1vdXNlU2Nyb2xsJywgcHJldmVudERlZmF1bHQsIGZhbHNlKTtcclxuXHR3aW5kb3cub25tb3VzZXdoZWVsID0gZG9jdW1lbnQub25tb3VzZXdoZWVsID0gbnVsbDtcclxuXHR3aW5kb3cub253aGVlbCA9IG51bGw7XHJcblx0d2luZG93Lm9udG91Y2htb3ZlID0gbnVsbDtcclxuXHRkb2N1bWVudC5vbmtleWRvd24gPSBudWxsO1xyXG59Il0sImZpbGUiOiJzY3JpcHQuanMifQ==
